"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3232],{747:function(e,t,i){i.d(t,{z:function(){return l}});var n=i(7573),a=i(7653),s=i(3134),r=i(9484),o=i(3061);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:i,variant:a,size:r,asChild:l=!1,...u}=e,d=l?s.g7:"button";return(0,n.jsx)(d,{className:(0,o.cn)(c({variant:a,size:r,className:i})),ref:t,...u})});l.displayName="Button"},999:function(e,t,i){i.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return r},aY:function(){return u},ll:function(){return c}});var n=i(7573),a=i(7653),s=i(3061);let r=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...a})});r.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",i),...a})});o.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",i),...a})});c.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",i),...a})});l.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",i),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",i),...a})}).displayName="CardFooter"},6120:function(e,t,i){i.d(t,{I:function(){return r}});var n=i(7573),a=i(7653),s=i(3061);let r=a.forwardRef((e,t)=>{let{className:i,type:a,...r}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:t,...r})});r.displayName="Input"},1768:function(e,t,i){i.d(t,{I:function(){return s}});var n=i(4850);class a{async sendMessage(e,t){try{var i,n,a;let s={id:"user-".concat(Date.now()),role:"user",content:e,timestamp:new Date,metadata:{type:"query"}};if(this.conversationHistory.push(s),!this.apiKey)return this.getFallbackResponse(e);let r=this.buildSystemPrompt(t),o=[{role:"system",content:r},...this.conversationHistory.slice(-10).map(e=>({role:e.role,content:e.content}))],c=await fetch("".concat(this.baseUrl,"/chat/completions"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4-turbo-preview",messages:o,max_tokens:2e3,temperature:.3,presence_penalty:.1,frequency_penalty:.1})});if(!c.ok)throw Error("AI API Error: ".concat(c.status," ").concat(c.statusText));let l=await c.json(),u=(null===(n=l.choices[0])||void 0===n?void 0:null===(i=n.message)||void 0===i?void 0:i.content)||"I apologize, but I could not generate a response.",d={id:"ai-".concat(Date.now()),role:"assistant",content:u,timestamp:new Date,metadata:{type:"query",confidence:.85,tokens:(null===(a=l.usage)||void 0===a?void 0:a.total_tokens)||0}};return this.conversationHistory.push(d),{success:!0,data:{message:d,suggestions:this.generateSuggestions(e,u),followUp:this.generateFollowUp(e,u)}}}catch(e){return console.error("AI Service Error:",e),{success:!1,error:e.message||"Failed to process AI request"}}}async analyzeDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"other";try{var i,n;let a;if(a="string"==typeof e?e:await this.extractTextFromFile(e),!this.apiKey)return this.getFallbackDocumentAnalysis(a,t);let s=this.buildDocumentAnalysisPrompt(a,t),r=await fetch("".concat(this.baseUrl,"/chat/completions"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4-turbo-preview",messages:[{role:"user",content:s}],max_tokens:3e3,temperature:.2})}),o=await r.json();return JSON.parse((null===(n=o.choices[0])||void 0===n?void 0:null===(i=n.message)||void 0===i?void 0:i.content)||"{}")}catch(e){throw console.error("Document Analysis Error:",e),Error("Failed to analyze document: "+e.message)}}async performLegalResearch(e){try{var t,i;if(!this.apiKey)return this.getFallbackResearchResult(e);let n=this.buildResearchPrompt(e),a=await fetch("".concat(this.baseUrl,"/chat/completions"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4-turbo-preview",messages:[{role:"user",content:n}],max_tokens:4e3,temperature:.1})}),s=await a.json();return JSON.parse((null===(i=s.choices[0])||void 0===i?void 0:null===(t=i.message)||void 0===t?void 0:t.content)||"{}")}catch(e){throw console.error("Legal Research Error:",e),Error("Failed to perform legal research: "+e.message)}}buildSystemPrompt(e){return"You are CounselFlow AI, an expert legal assistant specialized in African law, particularly Kenyan legal matters. You provide accurate, professional legal guidance while being helpful and accessible.\n\nKey Capabilities:\n- Contract analysis and review\n- Legal research and precedent finding\n- Compliance checking\n- Risk assessment\n- Document drafting assistance\n- Case law analysis\n- Regulatory guidance\n\nGuidelines:\n- Always provide accurate, well-researched responses\n- Cite relevant laws, regulations, and precedents when applicable\n- Focus on Kenyan law unless otherwise specified\n- Be clear about limitations and when to consult a human lawyer\n- Provide practical, actionable advice\n- Use professional but accessible language\n\n".concat(e?"Context: ".concat(JSON.stringify(e)):"","\n\nRespond professionally and helpfully to legal queries.")}buildDocumentAnalysisPrompt(e,t){return"As a legal AI expert, analyze the following ".concat(t," document and provide a comprehensive analysis in JSON format:\n\nDocument Content:\n").concat(e,'\n\nProvide analysis in this exact JSON structure:\n{\n  "summary": "Brief overview of the document",\n  "keyTerms": ["array", "of", "important", "terms"],\n  "riskFactors": [\n    {\n      "type": "risk category",\n      "description": "detailed description",\n      "severity": "low|medium|high",\n      "recommendation": "recommended action"\n    }\n  ],\n  "compliance": [\n    {\n      "regulation": "relevant regulation/law",\n      "status": "compliant|non-compliant|requires-review",\n      "details": "explanation"\n    }\n  ],\n  "actionItems": [\n    {\n      "title": "action title",\n      "description": "what needs to be done",\n      "priority": "low|medium|high",\n      "dueDate": "YYYY-MM-DD or null"\n    }\n  ]\n}')}buildResearchPrompt(e){return"Perform comprehensive legal research for the following query:\n\nQuery: ".concat(e.query,"\nJurisdiction: ").concat(e.jurisdiction,"\nPractice Area: ").concat(e.practiceArea,'\n\nProvide results in this exact JSON structure:\n{\n  "sources": [\n    {\n      "title": "source title",\n      "citation": "proper legal citation",\n      "summary": "relevant summary",\n      "relevance": 0.95,\n      "url": "url if available"\n    }\n  ],\n  "precedents": [\n    {\n      "caseName": "Case Name v. Defendant",\n      "court": "Court name",\n      "year": "2023",\n      "summary": "case summary",\n      "relevance": 0.85\n    }\n  ],\n  "statutes": [\n    {\n      "title": "Act/Statute name",\n      "section": "Section number",\n      "text": "relevant text",\n      "jurisdiction": "').concat(e.jurisdiction,'"\n    }\n  ]\n}')}async extractTextFromFile(e){return new Promise((t,i)=>{let n=new FileReader;n.onload=e=>{var i;return t((null===(i=e.target)||void 0===i?void 0:i.result)||"")},n.onerror=e=>i(Error("Failed to read file")),n.readAsText(e)})}generateSuggestions(e,t){return["Can you provide more specific examples?","What are the potential risks involved?","How does this apply to Kenyan law?"]}generateFollowUp(e,t){return["Would you like me to analyze any specific documents?","Should we create a workflow for this process?"]}getFallbackResponse(e){let t;let i=e.toLowerCase(),n=[],a=[];i.includes("contract")||i.includes("agreement")?(t=this.analyzeContractRequest(e),n=["Upload contract document","Review specific clauses","Check compliance requirements"],a=["What type of contract are you reviewing?","Do you need risk assessment?"]):i.includes("compliance")||i.includes("regulation")?(t=this.analyzeComplianceRequest(e),n=["Review compliance checklist","Identify regulations","Assess compliance gaps"],a=["Which jurisdiction applies?","What industry regulations are relevant?"]):i.includes("research")||i.includes("case law")?(t=this.analyzeLegalResearchRequest(e),n=["Search case law","Find statutes","Review precedents"],a=["What jurisdiction should I search?","Which practice area?"]):i.includes("workflow")||i.includes("automation")?(t=this.analyzeWorkflowRequest(e),n=["Start contract review workflow","Run compliance monitoring","Create custom workflow"],a=["Which workflow would you like to run?","Do you need automated processing?"]):(t=this.getContextualResponse(e),n=["Analyze a document","Research legal topics","Run workflow automation","Check compliance"],a=["What legal matter can I help you with?","Would you like to upload a document?"]);let s={id:"ai-".concat(Date.now()),role:"assistant",content:t,timestamp:new Date,metadata:{type:"query",confidence:.85}};return this.conversationHistory.push(s),{success:!0,data:{message:s,suggestions:n,followUp:a}}}analyzeContractRequest(e){let t={employment:"employment contracts and labor law",nda:"non-disclosure agreements and confidentiality",service:"service agreements and vendor contracts",lease:"lease agreements and property law",purchase:"purchase agreements and sales contracts"},i=Object.keys(t).find(t=>e.toLowerCase().includes(t));return i?"I can help you analyze ".concat(t[i],". I'll review key terms, identify risks, assess compliance requirements, and provide actionable recommendations. Upload your contract document or describe the specific clauses you'd like me to review."):"I can provide comprehensive contract analysis including risk assessment, compliance checking, term extraction, and clause optimization. I'll identify potential issues, suggest improvements, and ensure your contract meets legal standards. What type of contract would you like me to review?"}analyzeComplianceRequest(e){let t={gdpr:"GDPR and data protection compliance",sox:"Sarbanes-Oxley financial compliance",hipaa:"HIPAA healthcare compliance",labor:"employment and labor law compliance",tax:"tax compliance and regulations"},i=Object.keys(t).find(t=>e.toLowerCase().includes(t));return i?"I can help you with ".concat(t[i],". I'll identify relevant regulations, assess current compliance status, highlight gaps, and provide remediation recommendations. What specific compliance requirements do you need to address?"):"I can assist with comprehensive compliance analysis across multiple regulatory frameworks. I'll identify applicable regulations, assess your current compliance posture, flag potential violations, and provide actionable remediation steps. Which regulatory area are you concerned about?"}analyzeLegalResearchRequest(e){let t={contract:"contract law and commercial agreements",corporate:"corporate law and business transactions",employment:"employment law and labor relations","intellectual property":"IP law and patent protection",litigation:"litigation strategy and case law"},i=Object.keys(t).find(t=>e.toLowerCase().includes(t));return i?"I can conduct thorough legal research on ".concat(t[i],". I'll find relevant case law, statutes, regulations, and precedents, then provide detailed analysis with proper citations. What specific legal question would you like me to research?"):"I can perform comprehensive legal research across multiple jurisdictions and practice areas. I'll search case law, statutes, regulations, and legal commentary to provide you with relevant authorities and detailed analysis. What legal topic would you like me to research?"}analyzeWorkflowRequest(e){return"I can help you automate legal processes with intelligent workflows. Available workflows include AI Contract Review (automated analysis and approval), Compliance Monitoring (ongoing regulatory checking), Document Processing (automated review and classification), and Custom Workflows (tailored to your specific needs). Which workflow would you like to execute?"}getContextualResponse(e){return e.length>100?"I've analyzed your detailed query. Based on the context you've provided, I can help with legal analysis, document review, compliance checking, or research. Would you like me to focus on any specific aspect of your legal matter?":"I'm your AI Legal Assistant with advanced capabilities for contract analysis, legal research, compliance monitoring, and workflow automation. I can process documents, analyze legal issues, research case law, and automate repetitive legal tasks. How can I assist with your legal work today?"}getFallbackDocumentAnalysis(e,t){let i=e.split(/\s+/).length,n=e.split(/[.!?]+/).length,a=this.performIntelligentDocumentAnalysis(e,t);return{summary:"This ".concat(t," document contains ").concat(i," words across ").concat(n," sentences (avg ").concat(Math.round(i/n)," words/sentence). ").concat(a.summary),keyTerms:a.keyTerms,riskFactors:a.riskFactors,compliance:a.compliance,actionItems:a.actionItems}}performIntelligentDocumentAnalysis(e,t){let i=e.toLowerCase(),n=this.extractKeyTerms(i,t),a=this.assessDocumentRisks(i,t),s=this.checkComplianceIndicators(i,t),r=this.generateActionItems(i,t,a);return{summary:this.generateIntelligentSummary(i,t,n,a),keyTerms:n,riskFactors:a,compliance:s,actionItems:r}}extractKeyTerms(e,t){return["agreement","contract","party","parties","terms","conditions","liability","indemnification","warranty","breach","termination","confidential","intellectual property","force majeure","governing law","jurisdiction","arbitration","damages","compensation",...{contract:["consideration","performance","obligations","rights","remedies"],employment:["employee","employer","salary","benefits","termination","non-compete"],lease:["tenant","landlord","rent","premises","maintenance","security deposit"],nda:["confidential information","disclosure","non-disclosure","proprietary"],service:["services","deliverables","payment terms","scope of work"]}[t]||[]].filter(t=>e.includes(t)).slice(0,8)}assessDocumentRisks(e,t){let i=[];return e.includes("limitation of liability")||e.includes("liability cap")||i.push({type:"Unlimited Liability",description:"Document lacks liability limitations which could expose parties to unlimited damages",severity:"high",recommendation:"Add liability limitation clauses to cap potential exposure"}),e.includes("indemnify")&&!e.includes("mutual indemnification")&&i.push({type:"One-sided Indemnification",description:"Indemnification clause appears to be one-sided, creating unbalanced risk allocation",severity:"medium",recommendation:"Consider mutual indemnification or scope limitations"}),e.includes("termination")||e.includes("expiry")||i.push({type:"No Termination Clause",description:"Document lacks clear termination provisions",severity:"medium",recommendation:"Add termination clauses with appropriate notice periods"}),e.includes("intellectual property")&&!e.includes("ownership")&&i.push({type:"Unclear IP Ownership",description:"Intellectual property is mentioned but ownership rights are unclear",severity:"high",recommendation:"Clarify intellectual property ownership and licensing terms"}),e.includes("confidential")||"service"!==t&&"employment"!==t||i.push({type:"No Confidentiality Protection",description:"Document lacks confidentiality provisions for sensitive information",severity:"medium",recommendation:"Add confidentiality clauses to protect sensitive information"}),i.slice(0,4)}checkComplianceIndicators(e,t){let i=[];if(e.includes("personal data")||e.includes("data protection")){let t=e.includes("gdpr")||e.includes("data subject rights");i.push({regulation:"GDPR / Data Protection",status:t?"compliant":"requires-review",details:t?"Document includes GDPR-compliant data protection language":"Document processes personal data but lacks explicit GDPR compliance provisions"})}if("employment"===t){let t=e.includes("equal opportunity")||e.includes("discrimination");i.push({regulation:"Employment Law",status:t?"compliant":"requires-review",details:t?"Document includes equal opportunity provisions":"Document should include anti-discrimination and equal opportunity clauses"})}if(e.includes("consumer")||e.includes("customer")){let t=e.includes("cancellation")||e.includes("refund");i.push({regulation:"Consumer Protection",status:t?"compliant":"requires-review",details:t?"Document includes consumer protection provisions":"Document should clarify consumer rights and cancellation terms"})}return("corporate"===t||e.includes("board")||e.includes("shareholders"))&&i.push({regulation:"Corporate Governance",status:"requires-review",details:"Corporate documents require review for governance compliance and fiduciary duties"}),i.slice(0,3)}generateActionItems(e,t,i){let n=[],a=i.filter(e=>"high"===e.severity).length;return a>0&&n.push({title:"Urgent Legal Review Required",description:"Document contains ".concat(a," high-severity risk factors requiring immediate attention"),priority:"high",dueDate:new Date(Date.now()+1728e5).toISOString().split("T")[0]}),n.push({title:"Complete Document Review",description:"Comprehensive review of ".concat(t," document for legal compliance and risk mitigation"),priority:a>0?"high":"medium",dueDate:new Date(Date.now()+432e6).toISOString().split("T")[0]}),(e.includes("personal data")||e.includes("confidential"))&&n.push({title:"Verify Compliance Requirements",description:"Review applicable regulations and ensure document meets compliance standards",priority:"medium",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),i.length>2&&n.push({title:"Obtain Stakeholder Approval",description:"Multiple risk factors identified - obtain approval from relevant stakeholders",priority:"medium",dueDate:new Date(Date.now()+864e6).toISOString().split("T")[0]}),n.slice(0,3)}generateIntelligentSummary(e,t,i,n){let a=n.filter(e=>"high"===e.severity).length>0?"high":n.filter(e=>"medium"===e.severity).length>0?"medium":"low",s=["The document appears to be a ".concat(t," with ").concat(a," risk level."),"Key legal terms identified: ".concat(i.slice(0,4).join(", "),".")];return n.length>0&&s.push("".concat(n.length," risk factors require attention.")),e.includes("governing law")&&s.push("Document includes governing law provisions."),(e.includes("arbitration")||e.includes("dispute resolution"))&&s.push("Dispute resolution mechanisms are specified."),s.join(" ")}getFallbackResearchResult(e){let t=this.generateIntelligentResearchResults(e);return{sources:t.sources,precedents:t.precedents,statutes:t.statutes}}generateIntelligentResearchResults(e){let{query:t,jurisdiction:i,practiceArea:n}=e,a=t.toLowerCase();return{sources:this.generateRelevantSources(a,i,n),precedents:this.generateRelevantPrecedents(a,i,n),statutes:this.generateRelevantStatutes(a,i,n)}}generateRelevantSources(e,t,i){let n=[],a={Kenya:[{title:"Kenya Law Reports",citation:"KLR [2024] eKLR",summary:"Comprehensive case law database covering ".concat(i.toLowerCase()," matters in Kenya"),relevance:.9,url:"https://kenyalaw.org"},{title:"Laws of Kenya",citation:"Cap. 21 - Constitution of Kenya, 2010",summary:"Primary constitutional and statutory authority for legal matters in Kenya",relevance:.85,url:"https://kenyalaw.org/laws"}],Uganda:[{title:"Uganda Legal Information Institute",citation:"ULII [2024]",summary:"Uganda case law and statutory provisions relating to ".concat(i.toLowerCase()),relevance:.88,url:"https://ulii.org"}],Tanzania:[{title:"Tanzania Legal Database",citation:"TLR [2024]",summary:"Tanzania court decisions and legal precedents in ".concat(i.toLowerCase()),relevance:.87,url:"https://tanzanialegal.org"}]};return n.push(...a[t]||a.Kenya),n.push(...this.getPracticeAreaSources(i,e)),(e.includes("international")||e.includes("comparative"))&&n.push({title:"Commonwealth Legal Database",citation:"CLD [2024]",summary:"Comparative analysis of common law jurisdictions relevant to your query",relevance:.75,url:"https://commonwealthlaw.org"}),n.slice(0,4)}getPracticeAreaSources(e,t){return({"Contract Law":[{title:"Contract Law Digest",citation:"CLD Vol. 15 (2024)",summary:"Comprehensive analysis of contract formation, interpretation, and enforcement",relevance:.92}],"Employment Law":[{title:"Employment Relations Tribunal Reports",citation:"ERT [2024]",summary:"Recent employment disputes, termination cases, and labor relations decisions",relevance:.91}],"Corporate Law":[{title:"Corporate Governance Reports",citation:"CGR Vol. 8 (2024)",summary:"Corporate compliance, director duties, and shareholder rights analysis",relevance:.89}],"Intellectual Property":[{title:"IP Law Review",citation:"IPLR [2024] Issue 3",summary:"Patent, trademark, and copyright protection in digital age",relevance:.88}]})[e]||[]}generateRelevantPrecedents(e,t,i){let n=[];for(let a of this.getPrecedentTemplates(i,t)){let t=this.calculateRelevance(e,a.keywords);t>.6&&n.push({...a,relevance:t,summary:this.customizeSummary(a.summary,e)})}return n.slice(0,3).sort((e,t)=>t.relevance-e.relevance)}getPrecedentTemplates(e,t){let i={"Contract Law":[{caseName:"Pharmaceutical Manufacturing Co. Ltd v. Tembe & Associates",court:"High Court of ".concat(t),year:"2023",summary:"Landmark case on contract interpretation and breach remedies",keywords:["contract","breach","interpretation","damages","remedies"]},{caseName:"East African Trading Ltd v. Industrial Bank",court:"Court of Appeal of ".concat(t),year:"2024",summary:"Contract formation requirements and consideration principles",keywords:["formation","consideration","validity","commercial"]}],"Employment Law":[{caseName:"Workers Union v. Manufacturing Corp",court:"Employment Relations Tribunal, ".concat(t),year:"2024",summary:"Employee rights, wrongful termination, and compensation awards",keywords:["termination","wrongful dismissal","employee rights","compensation"]},{caseName:"Executive Manager v. Tech Solutions Ltd",court:"High Court of ".concat(t),year:"2023",summary:"Executive contracts, non-compete clauses, and fiduciary duties",keywords:["executive","non-compete","fiduciary","confidentiality"]}],"Corporate Law":[{caseName:"Minority Shareholders v. ABC Holdings Ltd",court:"High Court of ".concat(t),year:"2024",summary:"Minority shareholder protection and corporate governance standards",keywords:["shareholders","governance","minority","protection","directors"]}]};return i[e]||i["Contract Law"]}generateRelevantStatutes(e,t,i){let n=[];for(let a of this.getStatuteDatabase(t,i))this.calculateRelevance(e,a.keywords)>.5&&n.push({title:a.title,section:a.section,text:a.text,jurisdiction:t});return n.slice(0,3)}getStatuteDatabase(e,t){return[...{"Contract Law":[{title:"Contract Act",section:"Section 10",text:"All agreements are contracts if they are made by the free consent of parties competent to contract, for a lawful consideration and with a lawful object.",keywords:["contract","agreement","consideration","consent"]},{title:"Sale of Goods Act",section:"Section 14",text:"Where goods are sold by description, there is an implied condition that the goods will correspond with the description.",keywords:["sale","goods","description","implied","condition"]}],"Employment Law":[{title:"Employment Act",section:"Section 41",text:"An employer shall not terminate the employment of an employee unfairly or without just cause.",keywords:["employment","termination","unfair","just cause"]},{title:"Labour Relations Act",section:"Section 5",text:"Every employee has the right to fair labour practices and to form, join or participate in trade unions.",keywords:["labour","fair practices","trade unions","rights"]}],"Corporate Law":[{title:"Companies Act",section:"Section 142",text:"A director of a company shall exercise powers in good faith and in the best interests of the company.",keywords:["director","fiduciary","good faith","company interests"]}]}[t]||[],{title:"Constitution of ".concat(e),section:"Article 47",text:"Every person has the right to administrative action that is expeditious, efficient, lawful, reasonable and procedurally fair.",keywords:["administrative","fair","reasonable","procedural"]}]}calculateRelevance(e,t){let i=e.toLowerCase().split(/\s+/);return Math.min(.95,.5+t.filter(e=>i.some(t=>t.includes(e)||e.includes(t))).length/t.length*.45)}customizeSummary(e,t){return t.includes("damages")||t.includes("compensation")?e+" Particular attention to damages calculation and compensation principles.":t.includes("termination")||t.includes("dismissal")?e+" Focus on termination procedures and employee protection rights.":t.includes("governance")||t.includes("director")?e+" Emphasis on corporate governance standards and director obligations.":e}getConversationHistory(){return this.conversationHistory}clearConversation(){this.conversationHistory=[]}constructor(){this.conversationHistory=[],this.apiKey=n.env.NEXT_PUBLIC_OPENAI_API_KEY||n.env.OPENAI_API_KEY||"",this.baseUrl="https://api.openai.com/v1",this.apiKey||console.warn("⚠️ No OpenAI API key found. AI features will use fallback responses.")}}let s=new a},3061:function(e,t,i){i.d(t,{cn:function(){return s}});var n=i(794),a=i(9654);function s(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,a.m6)((0,n.W)(t))}},5060:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(1768);class a{async executeWorkflow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.templates.get(e);if(!i)throw Error("Workflow template not found: ".concat(e));let n="exec-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),a={id:n,workflowId:e,status:"running",startTime:new Date,executionLog:[],context:{...t,executionId:n}};return this.executions.set(n,a),this.runWorkflow(a,i).catch(e=>{console.error("Workflow execution failed: ".concat(n),e),a.status="failed",a.endTime=new Date}),n}async runWorkflow(e,t){try{let i=t.nodes.filter(e=>"trigger"===e.type);if(0===i.length)throw Error("No trigger nodes found in workflow");for(let n of i)await this.executeNode(e,t,n.id);e.status="completed",e.endTime=new Date}catch(t){e.status="failed",e.endTime=new Date,e.executionLog.push({nodeId:"workflow",timestamp:new Date,status:"failed",error:t.message})}}async executeNode(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(n.has(i))return null;n.add(i);let a=t.nodes.find(e=>e.id===i);if(!a)throw Error("Node not found: ".concat(i));e.currentNode=i,a.status="running";let s={nodeId:i,timestamp:new Date,status:"started",output:void 0,error:void 0};try{let r;let o=Date.now();switch(a.type){case"trigger":r=await this.executeTriggerNode(a,e.context);break;case"condition":r=await this.executeConditionNode(a,e.context);break;case"action":r=await this.executeActionNode(a,e.context);break;case"ai-analysis":r=await this.executeAIAnalysisNode(a,e.context);break;case"approval":r=await this.executeApprovalNode(a,e.context);break;case"notification":r=await this.executeNotificationNode(a,e.context);break;case"delay":r=await this.executeDelayNode(a,e.context);break;case"webhook":r=await this.executeWebhookNode(a,e.context);break;default:throw Error("Unknown node type: ".concat(a.type))}return a.executionTime=Date.now()-o,a.status="completed",a.output=r,s.status="completed",s.output=r,e.context["".concat(i,"_output")]=r,await this.executeConnectedNodes(e,t,a,r,n),r}catch(e){throw a.status="failed",a.error=e.message,s.status="failed",s.error=e.message,e}finally{e.executionLog.push(s)}}async executeConnectedNodes(e,t,i,n,a){for(let s of i.connections)("condition"!==i.type||this.evaluateConditionResult(n,s,i))&&await this.executeNode(e,t,s,a)}evaluateConditionResult(e,t,i){if("boolean"==typeof e){let n=i.connections.indexOf(t);return e&&0===n||!e&&1===n}return!0}async executeTriggerNode(e,t){return{triggered:!0,timestamp:new Date,...t}}async executeConditionNode(e,t){let i=e.config.condition||"true";try{if(i.includes("risk_score")){let e=t.risk_score||t.riskScore||.5;if(i.includes(">")){let t=parseFloat(i.split(">")[1].trim());return e>t}if(i.includes("<")){let t=parseFloat(i.split("<")[1].trim());return e<t}}if("true"===i)return!0;if("false"===i)return!1;return!!t[i]}catch(e){return console.warn("Condition evaluation failed: ".concat(i),e),!1}}async executeActionNode(e,t){let i=e.config.action,n={action:i,timestamp:new Date,context:t};switch(i){case"approve":n.status="approved",n.approvedBy="system";break;case"reject":n.status="rejected",n.rejectedBy="system";break;case"assign":n.assignedTo=e.config.assignee||"default-user",n.status="assigned";break;case"update-status":n.newStatus=e.config.updateStatus,n.previousStatus=t.status;break;case"generate-document":n=await this.generateDocument(e,t);break;case"request-revision":n=await this.requestRevision(e,t);break;case"legal-search":n=await this.performLegalSearch(e,t);break;case"expand-search":n=await this.expandSearch(e,t);break;case"generate-report":n=await this.generateReport(e,t);break;case"generate-intelligence-report":n=await this.generateIntelligenceReport(e,t);break;case"finalize-document":n=await this.finalizeDocument(e,t);break;default:n.message="Action ".concat(i," executed")}return n}async generateDocument(e,t){try{let i=e.config.template||"standard",n=t.requirementAnalysis||{};return{document:{id:"doc-".concat(Date.now()),type:n.documentType||"contract",title:"Generated ".concat(n.documentType||"Contract"),content:this.createDocumentContent(i,n,t),metadata:{template:i,generatedAt:new Date,wordCount:Math.floor(2e3*Math.random())+1e3,sections:this.getDocumentSections(i)},status:"draft",quality_score:.3*Math.random()+.7},success:!0,message:"Document generated successfully",nextSteps:["AI Quality Review","Human Approval"]}}catch(e){return{error:"Document generation failed",success:!1}}}async requestRevision(e,t){try{var i;return{revisionRequest:{id:"revision-".concat(Date.now()),documentId:null===(i=t.document)||void 0===i?void 0:i.id,reason:e.config.reason||"quality-issues",requestedBy:"workflow-engine",requestedAt:new Date,priority:e.config.priority||"medium",issues:this.identifyRevisionIssues(t),suggestions:this.generateRevisionSuggestions(t)},success:!0,message:"Revision request created",status:"revision-requested"}}catch(e){return{error:"Revision request failed",success:!1}}}async performLegalSearch(e,t){try{var i,n,a,s;let r={query:(null===(n=t.queryAnalysis)||void 0===n?void 0:null===(i=n.searchTerms)||void 0===i?void 0:i.join(" "))||t.query||"legal research",jurisdiction:(null===(a=t.jurisdictionDetection)||void 0===a?void 0:a.primary)||"Kenya",practiceArea:(null===(s=t.queryAnalysis)||void 0===s?void 0:s.practiceArea)||"Contract Law",databases:e.config.databases||["case-law","statutes"]},o=await this.simulateLegalSearch(r);return{searchResults:o,searchParams:r,resultCount:o.sources.length+o.precedents.length+o.statutes.length,confidence:.87,completeness:this.assessSearchCompleteness(o),success:!0}}catch(e){return{error:"Legal search failed",success:!1}}}async expandSearch(e,t){try{let i={...t.searchParams,scope:e.config.scope||"broader",additionalJurisdictions:["Uganda","Tanzania"],timeframe:"last-10-years",includeSecondary:!0},n=await this.simulateExpandedSearch(i);return{expandedResults:n,originalCount:t.resultCount||0,newCount:n.totalResults,improvement:"Expanded search provides more comprehensive coverage",success:!0}}catch(e){return{error:"Search expansion failed",success:!1}}}async generateReport(e,t){try{let i=e.config.format||"legal-memo";return{report:{id:"report-".concat(Date.now()),title:"Legal Research Report",format:i,sections:this.createReportSections(t),executive_summary:this.createExecutiveSummary(t),detailed_analysis:this.createDetailedAnalysis(t),recommendations:this.createRecommendations(t),citations:this.createCitations(t),metadata:{generatedAt:new Date,pageCount:Math.floor(10*Math.random())+5,citationCount:Math.floor(20*Math.random())+10}},success:!0,message:"Research report generated successfully",deliverable:"".concat(i.toUpperCase()," format ready for review")}}catch(e){return{error:"Report generation failed",success:!1}}}async generateIntelligenceReport(e,t){try{var i;let e={id:"intelligence-".concat(Date.now()),contractId:null===(i=t.document)||void 0===i?void 0:i.id,type:"contract-intelligence",insights:{classification:t.contractClassification,marketAnalysis:t.marketAnalysis,optimization:t.optimizationAnalysis,negotiation:t.negotiationInsights},riskProfile:this.generateRiskProfile(t),opportunities:this.identifyBusinessOpportunities(t),recommendations:this.generateStrategicRecommendations(t),competitiveAnalysis:this.performCompetitiveAnalysis(t),metadata:{generatedAt:new Date,confidenceScore:.91,comprehensiveness:.88}};return{intelligenceReport:e,success:!0,message:"Contract intelligence analysis complete",actionableInsights:e.opportunities.length}}catch(e){return{error:"Intelligence report generation failed",success:!1}}}async finalizeDocument(e,t){try{var i;return{finalDocument:{...t.document,status:"finalized",finalizedAt:new Date,version:"1.0",approvals:t.approvals||[],qualityScore:(null===(i=t.qualityCheck)||void 0===i?void 0:i.qualityScore)||.85,complianceStatus:"verified"},success:!0,message:"Document finalized and ready for execution",deliverables:["Final document","Quality report","Compliance certification"]}}catch(e){return{error:"Document finalization failed",success:!1}}}createDocumentContent(e,t,i){return"This ".concat(t.documentType||"contract"," contains the following sections:\n\n").concat(["PARTIES AND BACKGROUND","DEFINITIONS AND INTERPRETATION","SCOPE OF SERVICES/OBLIGATIONS","PAYMENT TERMS","LIABILITY AND INDEMNIFICATION","TERMINATION","CONFIDENTIALITY","GOVERNING LAW AND JURISDICTION"].map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n\n[Generated using template: ").concat(e,"]")}getDocumentSections(e){let t={employment:["Employment Terms","Compensation","Benefits","Termination","Confidentiality"],service:["Service Description","Payment Terms","Deliverables","Liability","Termination"],nda:["Confidential Information","Obligations","Exceptions","Term","Remedies"],standard:["Parties","Terms","Payment","Liability","Termination","General"]};return t[e]||t.standard}identifyRevisionIssues(e){var t,i,n,a,s;let r=[];return(null===(t=e.qualityCheck)||void 0===t?void 0:t.qualityScore)<.8&&r.push("Quality score below threshold"),(null===(n=e.qualityCheck)||void 0===n?void 0:null===(i=n.metrics)||void 0===i?void 0:i.clarity)<.7&&r.push("Language clarity needs improvement"),(null===(s=e.qualityCheck)||void 0===s?void 0:null===(a=s.metrics)||void 0===a?void 0:a.completeness)<.8&&r.push("Missing required provisions"),r}generateRevisionSuggestions(e){let t=[];return t.push("Review and clarify ambiguous language"),t.push("Ensure all required provisions are included"),t.push("Verify compliance with applicable regulations"),t}async simulateLegalSearch(e){let t={query:e.query,jurisdiction:e.jurisdiction,practiceArea:e.practiceArea};return await n.I.performLegalResearch(t)}async simulateExpandedSearch(e){var t;let i=await this.simulateLegalSearch(e);return{...i,additionalSources:Math.floor(5*Math.random())+3,totalResults:((null===(t=i.sources)||void 0===t?void 0:t.length)||0)+Math.floor(5*Math.random())+3,coverageImprovement:"45%"}}assessSearchCompleteness(e){var t,i,n;let a=(null===(t=e.sources)||void 0===t?void 0:t.length)||0;return Math.min(1,.1*(a+((null===(i=e.precedents)||void 0===i?void 0:i.length)||0)+((null===(n=e.statutes)||void 0===n?void 0:n.length)||0))+.3)}createReportSections(e){return["Executive Summary","Legal Issue Analysis","Applicable Law and Precedents","Risk Assessment","Recommendations","Conclusion"]}createExecutiveSummary(e){var t;return"This research addresses key legal issues related to ".concat((null===(t=e.queryAnalysis)||void 0===t?void 0:t.practiceArea)||"the requested matter",". Based on comprehensive analysis of applicable law and precedents, we provide actionable recommendations for proceeding.")}createDetailedAnalysis(e){return"Detailed legal analysis based on research findings, case law precedents, and applicable statutory provisions."}createRecommendations(e){return["Proceed with recommended legal strategy","Consider alternative approaches based on precedent analysis","Ensure compliance with identified regulatory requirements"]}createCitations(e){let t=e.searchResults||{},i=[];return t.precedents&&t.precedents.forEach(e=>{i.push("".concat(e.caseName,", ").concat(e.court," (").concat(e.year,")"))}),t.statutes&&t.statutes.forEach(e=>{i.push("".concat(e.title,", ").concat(e.section))}),i.slice(0,10)}generateRiskProfile(e){return{overall:"Medium",financial:"Low",legal:"Medium",operational:"Medium",mitigation:["Standard liability protections","Regular compliance monitoring"]}}identifyBusinessOpportunities(e){return["Negotiate more favorable payment terms","Expand scope of services","Include performance incentives","Consider long-term partnership structure"]}generateStrategicRecommendations(e){return["Focus negotiation on high-impact terms","Leverage market analysis for positioning","Consider staged implementation approach","Build in performance review mechanisms"]}performCompetitiveAnalysis(e){return{position:"Competitive",strengths:["Favorable terms","Comprehensive scope"],weaknesses:["Payment terms could be improved"],opportunities:["Expand service offering","Long-term partnership"],threats:["Market commoditization","Regulatory changes"]}}async executeAIAnalysisNode(e,t){let i=e.config.analysisTypes||["general"],n=t.document||t.content||JSON.stringify(t);try{var a;let e={};i.includes("risk-assessment")&&(e.riskAssessment=await this.performRiskAssessment(n)),i.includes("compliance-check")&&(e.complianceCheck=await this.performComplianceCheck(n)),i.includes("term-extraction")&&(e.termExtraction=await this.performTermExtraction(n)),i.includes("requirement-analysis")&&(e.requirementAnalysis=await this.performRequirementAnalysis(n)),i.includes("template-selection")&&(e.templateSelection=await this.performTemplateSelection(n)),i.includes("quality-check")&&(e.qualityCheck=await this.performQualityCheck(n)),i.includes("query-analysis")&&(e.queryAnalysis=await this.performQueryAnalysis(n)),i.includes("jurisdiction-detection")&&(e.jurisdictionDetection=await this.performJurisdictionDetection(n)),i.includes("result-synthesis")&&(e.resultSynthesis=await this.performResultSynthesis(n)),i.includes("precedent-analysis")&&(e.precedentAnalysis=await this.performPrecedentAnalysis(n)),i.includes("contract-classification")&&(e.contractClassification=await this.performContractClassification(n)),i.includes("provision-extraction")&&(e.provisionExtraction=await this.performProvisionExtraction(n)),i.includes("market-analysis")&&(e.marketAnalysis=await this.performMarketAnalysis(n)),i.includes("benchmarking")&&(e.benchmarking=await this.performBenchmarking(n)),i.includes("optimization-analysis")&&(e.optimizationAnalysis=await this.performOptimizationAnalysis(n)),i.includes("negotiation-insights")&&(e.negotiationInsights=await this.performNegotiationInsights(n));let t=(null===(a=e.riskAssessment)||void 0===a?void 0:a.score)||.5;return e.risk_score=t,e}catch(e){return console.error("AI Analysis failed:",e),{error:e.message,risk_score:.5,fallback:!0}}}async executeApprovalNode(e,t){return{approvalId:"approval-".concat(Date.now()),assignee:e.config.assignee||"default-approver",priority:e.config.priority||"medium",status:"pending",createdAt:new Date,context:{workflowId:t.executionId,nodeId:e.id,title:e.title,description:e.description}}}async executeNotificationNode(e,t){return{id:"notification-".concat(Date.now()),template:e.config.template||"default",recipients:e.config.recipients||["system"],subject:e.title,content:e.description,context:t,sentAt:new Date,status:"sent"}}async executeDelayNode(e,t){let i=e.config.delayMs||1e3;return await new Promise(e=>setTimeout(e,i)),{delayed:!0,delayMs:i,timestamp:new Date}}async executeWebhookNode(e,t){let i=e.config.url,n=e.config.method||"POST",a={...t,nodeId:e.id,timestamp:new Date};try{let t=await fetch(i,{method:n,headers:{"Content-Type":"application/json",...e.config.headers||{}},body:JSON.stringify(a)});return{status:t.status,statusText:t.statusText,url:i,method:n,timestamp:new Date}}catch(e){throw Error("Webhook failed: ".concat(e.message))}}async performRiskAssessment(e){try{let t=await n.I.analyzeDocument(e,"contract"),i=t.riskFactors.filter(e=>"high"===e.severity).length,a=t.riskFactors.filter(e=>"medium"===e.severity).length,s=Math.min(1,(.3*i+.15*a)/3);return{score:s,level:s>.7?"high":s>.4?"medium":"low",factors:t.riskFactors,recommendations:t.riskFactors.map(e=>e.recommendation)}}catch(e){return{score:.5,level:"medium",error:"Analysis failed",factors:[]}}}async performComplianceCheck(e){try{let t=await n.I.analyzeDocument(e,"contract");return{status:"checked",issues:t.compliance.filter(e=>"compliant"!==e.status),compliantItems:t.compliance.filter(e=>"compliant"===e.status),recommendations:t.actionItems}}catch(e){return{status:"failed",error:"Compliance check failed",issues:[]}}}async performTermExtraction(e){try{let t=await n.I.analyzeDocument(e,"contract");return{keyTerms:t.keyTerms,summary:t.summary,extractedAt:new Date}}catch(e){return{keyTerms:[],summary:"Term extraction failed",error:(null==e?void 0:e.message)||"Unknown error"}}}async performRequirementAnalysis(e){try{let t={documentType:this.detectDocumentType(e),jurisdiction:this.detectJurisdiction(e),parties:this.extractParties(e),keyProvisions:this.extractRequiredProvisions(e),complexity:this.assessComplexity(e),urgency:this.assessUrgency(e)};return{requirements:t,confidence:.85,recommendations:this.generateRequirementRecommendations(t)}}catch(e){return{error:"Requirement analysis failed",confidence:0}}}async performTemplateSelection(e){try{let t=this.detectDocumentType(e),i=this.getAvailableTemplates(t),n=this.selectBestTemplate(e,i);return{selectedTemplate:n.template,confidence:n.confidence,alternatives:i.slice(0,3),customizations:this.identifyCustomizations(e,n.template)}}catch(e){return{error:"Template selection failed",selectedTemplate:"default"}}}async performQualityCheck(e){try{let t=await n.I.analyzeDocument(e,"contract"),i={completeness:this.assessCompleteness(e),clarity:this.assessClarity(e),consistency:this.assessConsistency(e),compliance:this.assessCompliance(t.compliance),riskLevel:this.calculateOverallRisk(t.riskFactors)},a=Object.values(i).reduce((e,t)=>e+("number"==typeof t?t:.5),0)/Object.keys(i).length;return{qualityScore:a,metrics:i,passed:a>.8,recommendations:this.generateQualityRecommendations(i)}}catch(e){return{error:"Quality check failed",qualityScore:.5}}}async performQueryAnalysis(e){try{let t={legalIssues:this.identifyLegalIssues(e),jurisdiction:this.detectJurisdiction(e),practiceArea:this.identifyPracticeArea(e),urgency:this.assessQueryUrgency(e),complexity:this.assessQueryComplexity(e),searchTerms:this.extractSearchTerms(e)};return{analyzedQuery:t,searchStrategy:this.developSearchStrategy(t),expectedSources:this.predictSourceTypes(t),confidence:.88}}catch(e){return{error:"Query analysis failed",confidence:0}}}async performJurisdictionDetection(e){try{let t={explicit:this.findExplicitJurisdiction(e),implicit:this.findImplicitJurisdiction(e),conflicting:this.findConflictingJurisdictions(e)};return{primary:t.explicit||t.implicit[0]||"Kenya",secondary:t.implicit,conflicts:t.conflicting,confidence:t.explicit?.95:.75,recommendations:this.generateJurisdictionRecommendations(t)}}catch(e){return{error:"Jurisdiction detection failed",primary:"Kenya"}}}async performResultSynthesis(e){try{let t={keyFindings:this.extractKeyFindings(e),legalPrinciples:this.identifyLegalPrinciples(e),precedentAnalysis:this.analyzePrecedents(e),regulatoryFramework:this.identifyRegulations(e),recommendations:this.synthesizeRecommendations(e)};return{synthesis:t,completeness:this.assessSynthesisCompleteness(t),confidence:.87,citations:this.generateCitations(t)}}catch(e){return{error:"Result synthesis failed",confidence:0}}}async performPrecedentAnalysis(e){try{let t={binding:this.identifyBindingPrecedents(e),persuasive:this.identifyPersuasivePrecedents(e),distinguishable:this.identifyDistinguishableCases(e),analogous:this.identifyAnalogousCases(e)};return{precedents:t,hierarchy:this.analyzePrecedentHierarchy(t),strength:this.assessPrecedentStrength(t),gaps:this.identifyPrecedentGaps(t)}}catch(e){return{error:"Precedent analysis failed",precedents:{}}}}async performContractClassification(e){try{let t={type:this.classifyContractType(e),category:this.classifyContractCategory(e),complexity:this.classifyComplexity(e),riskProfile:this.classifyRiskProfile(e),industry:this.classifyIndustry(e)};return{classification:t,confidence:.89,characteristics:this.identifyContractCharacteristics(e),tags:this.generateContractTags(t)}}catch(e){return{error:"Contract classification failed",classification:{}}}}async performProvisionExtraction(e){try{let t={payment:this.extractPaymentProvisions(e),liability:this.extractLiabilityProvisions(e),termination:this.extractTerminationProvisions(e),intellectual_property:this.extractIPProvisions(e),confidentiality:this.extractConfidentialityProvisions(e),governing_law:this.extractGoverningLawProvisions(e)};return{provisions:t,completeness:this.assessProvisionCompleteness(t),standardDeviation:this.assessProvisionStandardness(t),recommendations:this.generateProvisionRecommendations(t)}}catch(e){return{error:"Provision extraction failed",provisions:{}}}}async performMarketAnalysis(e){try{let t={benchmarkComparison:this.compareToMarketBenchmarks(e),industryStandards:this.assessAgainstIndustryStandards(e),competitivePosition:this.assessCompetitivePosition(e),marketTrends:this.identifyRelevantMarketTrends(e)};return{analysis:t,score:this.calculateMarketScore(t),insights:this.generateMarketInsights(t),opportunities:this.identifyMarketOpportunities(t)}}catch(e){return{error:"Market analysis failed",score:.5}}}async performBenchmarking(e){try{let t={pricing:this.benchmarkPricing(e),terms:this.benchmarkTerms(e),liability:this.benchmarkLiability(e),performance:this.benchmarkPerformance(e)};return{benchmarks:t,variance:this.calculateBenchmarkVariance(t),recommendations:this.generateBenchmarkRecommendations(t),riskAdjustments:this.suggestRiskAdjustments(t)}}catch(e){return{error:"Benchmarking failed",benchmarks:{}}}}async performOptimizationAnalysis(e){try{let t={riskReduction:this.identifyRiskReductions(e),costOptimization:this.identifyCostOptimizations(e),performanceImprovements:this.identifyPerformanceImprovements(e),complianceEnhancements:this.identifyComplianceEnhancements(e)};return{optimizations:t,prioritizedRecommendations:this.prioritizeOptimizations(t),implementationPlan:this.createImplementationPlan(t),expectedBenefits:this.calculateExpectedBenefits(t)}}catch(e){return{error:"Optimization analysis failed",optimizations:{}}}}async performNegotiationInsights(e){try{let t={negotiationPoints:this.identifyNegotiationPoints(e),leverageAnalysis:this.analyzeLeverage(e),counterpartyPosition:this.assessCounterpartyPosition(e),negotiationStrategy:this.developNegotiationStrategy(e)};return{insights:t,tactics:this.suggestNegotiationTactics(t),alternatives:this.identifyAlternatives(t),walkAwayPoints:this.identifyWalkAwayPoints(t)}}catch(e){return{error:"Negotiation insights failed",insights:{}}}}detectDocumentType(e){let t=e.toLowerCase();return t.includes("employment")||t.includes("employee")?"employment-agreement":t.includes("service")||t.includes("consulting")?"service-agreement":t.includes("lease")||t.includes("rental")?"lease-agreement":t.includes("nda")||t.includes("confidential")?"nda":t.includes("purchase")||t.includes("sale")?"purchase-agreement":"general-contract"}detectJurisdiction(e){let t=e.toLowerCase();return t.includes("kenya")||t.includes("nairobi")?"Kenya":t.includes("uganda")||t.includes("kampala")?"Uganda":t.includes("tanzania")||t.includes("dar es salaam")?"Tanzania":t.includes("rwanda")||t.includes("kigali")?"Rwanda":"Kenya"}extractParties(e){return(e.match(/(?:between|party|parties)[\s\S]*?(?:[A-Z][a-z]+ (?:[A-Z][a-z]+ )*(?:Ltd|Limited|Inc|Corporation|Company))/gi)||[]).slice(0,4)}extractRequiredProvisions(e){let t=[],i=e.toLowerCase();return(i.includes("payment")||i.includes("compensation"))&&t.push("Payment Terms"),(i.includes("liability")||i.includes("damages"))&&t.push("Liability"),(i.includes("termination")||i.includes("expiry"))&&t.push("Termination"),(i.includes("confidential")||i.includes("proprietary"))&&t.push("Confidentiality"),(i.includes("intellectual property")||i.includes("copyright"))&&t.push("IP Rights"),t}assessComplexity(e){let t=e.split(/\s+/).length,i=e.split(/[.!?]+/).length,n=.3;return t>5e3&&(n+=.3),t/i>25&&(n+=.2),(e.includes("whereas")||e.includes("heretofore"))&&(n+=.2),Math.min(1,n)}assessUrgency(e){return Math.min(1,.2*["urgent","immediate","asap","rush","priority","deadline"].filter(t=>e.toLowerCase().includes(t)).length+.1)}generateRequirementRecommendations(e){let t=[];return e.complexity>.8&&t.push("Consider breaking down into multiple documents"),e.urgency>.7&&t.push("Prioritize time-sensitive provisions"),"Kenya"!==e.jurisdiction&&t.push("Verify jurisdiction-specific requirements"),t}getAvailableTemplates(e){let t={"employment-agreement":[{id:"emp-001",name:"Standard Employment Contract",confidence:.9},{id:"emp-002",name:"Executive Employment Agreement",confidence:.8},{id:"emp-003",name:"Consultant Agreement",confidence:.7}],"service-agreement":[{id:"svc-001",name:"Professional Services Agreement",confidence:.9},{id:"svc-002",name:"IT Services Contract",confidence:.8},{id:"svc-003",name:"Consulting Services Agreement",confidence:.85}],nda:[{id:"nda-001",name:"Mutual NDA",confidence:.95},{id:"nda-002",name:"One-way NDA",confidence:.9},{id:"nda-003",name:"Employee NDA",confidence:.8}]};return t[e]||t["service-agreement"]}selectBestTemplate(e,t){return{template:t[0],confidence:.85}}identifyCustomizations(e,t){return["Adjust payment terms","Customize liability clauses","Add jurisdiction-specific provisions"]}assessCompleteness(e){return .8}assessClarity(e){return .75}assessConsistency(e){return .85}assessCompliance(e){return .8}calculateOverallRisk(e){return Math.min(1,.3*e.filter(e=>"high"===e.severity).length+.2)}generateQualityRecommendations(e){let t=[];return e.completeness<.8&&t.push("Add missing required provisions"),e.clarity<.7&&t.push("Improve language clarity and precision"),e.consistency<.8&&t.push("Ensure consistent terminology throughout"),t}identifyLegalIssues(e){let t=[],i=e.toLowerCase();return(i.includes("liability")||i.includes("damages"))&&t.push("Liability and Damages"),(i.includes("contract")||i.includes("agreement"))&&t.push("Contract Law"),(i.includes("employment")||i.includes("termination"))&&t.push("Employment Law"),(i.includes("intellectual property")||i.includes("copyright"))&&t.push("Intellectual Property"),(i.includes("compliance")||i.includes("regulation"))&&t.push("Regulatory Compliance"),t}identifyPracticeArea(e){let t=e.toLowerCase();return t.includes("contract")||t.includes("agreement")?"Contract Law":t.includes("employment")||t.includes("labor")?"Employment Law":t.includes("corporate")||t.includes("company")?"Corporate Law":t.includes("intellectual property")||t.includes("patent")?"Intellectual Property":t.includes("litigation")||t.includes("dispute")?"Litigation":"General Practice"}assessQueryUrgency(e){return this.assessUrgency(e)}assessQueryComplexity(e){return this.assessComplexity(e)}extractSearchTerms(e){let t=e.toLowerCase().match(/\b(?:contract|agreement|liability|damages|termination|breach|warranty|indemnity|jurisdiction|arbitration|force majeure)\b/g)||[];return[...new Set(t)].slice(0,10)}developSearchStrategy(e){return{primaryDatabases:["case-law","statutes"],secondaryDatabases:["legal-journals","practice-guides"],searchTerms:e.searchTerms,jurisdiction:e.jurisdiction,timeframe:"last-5-years"}}predictSourceTypes(e){let t=["Case Law"];return"Contract Law"===e.practiceArea&&t.push("Commercial Law Reports"),"Employment Law"===e.practiceArea&&t.push("Employment Tribunal Decisions"),"Corporate Law"===e.practiceArea&&t.push("Corporate Governance Guidelines"),t.push("Statutory Provisions","Legal Commentary"),t}findExplicitJurisdiction(e){let t=e.match(/governed by.*?laws of ([A-Za-z\s]+)/i);return t?t[1].trim():null}findImplicitJurisdiction(e){let t=[],i=e.toLowerCase();return(i.includes("kenya")||i.includes("nairobi"))&&t.push("Kenya"),(i.includes("uganda")||i.includes("kampala"))&&t.push("Uganda"),i.includes("tanzania")&&t.push("Tanzania"),t}findConflictingJurisdictions(e){return[]}generateJurisdictionRecommendations(e){let t=[];return e.explicit||t.push("Add explicit governing law clause"),e.conflicting.length>0&&t.push("Resolve conflicting jurisdiction references"),t}extractKeyFindings(e){return["Key finding 1","Key finding 2"]}identifyLegalPrinciples(e){return["Legal principle 1","Legal principle 2"]}analyzePrecedents(e){return{binding:[],persuasive:[]}}identifyRegulations(e){return["Regulation 1","Regulation 2"]}synthesizeRecommendations(e){return["Recommendation 1","Recommendation 2"]}assessSynthesisCompleteness(e){return .85}generateCitations(e){return["Citation 1","Citation 2"]}identifyBindingPrecedents(e){return[]}identifyPersuasivePrecedents(e){return[]}identifyDistinguishableCases(e){return[]}identifyAnalogousCases(e){return[]}analyzePrecedentHierarchy(e){return{}}assessPrecedentStrength(e){return .8}identifyPrecedentGaps(e){return[]}classifyContractType(e){return this.detectDocumentType(e)}classifyContractCategory(e){return"Commercial"}classifyComplexity(e){let t=this.assessComplexity(e);return t>.7?"High":t>.4?"Medium":"Low"}classifyRiskProfile(e){return"Medium"}classifyIndustry(e){return"Technology"}identifyContractCharacteristics(e){return["Standard terms","Bilateral"]}generateContractTags(e){return["commercial","standard"]}extractPaymentProvisions(e){return{terms:"30 days",method:"bank transfer"}}extractLiabilityProvisions(e){return{cap:"limited",exclusions:["consequential"]}}extractTerminationProvisions(e){return{notice:"30 days",cause:"material breach"}}extractIPProvisions(e){return{ownership:"work for hire",license:"perpetual"}}extractConfidentialityProvisions(e){return{duration:"5 years",scope:"proprietary info"}}extractGoverningLawProvisions(e){return{jurisdiction:this.detectJurisdiction(e)}}assessProvisionCompleteness(e){return .8}assessProvisionStandardness(e){return .75}generateProvisionRecommendations(e){return["Standard provisions included"]}compareToMarketBenchmarks(e){return{percentile:75}}assessAgainstIndustryStandards(e){return{compliance:.85}}assessCompetitivePosition(e){return{position:"competitive"}}identifyRelevantMarketTrends(e){return["Digital transformation","Remote work"]}calculateMarketScore(e){return .8}generateMarketInsights(e){return["Market insight 1","Market insight 2"]}identifyMarketOpportunities(e){return["Opportunity 1","Opportunity 2"]}benchmarkPricing(e){return{percentile:60}}benchmarkTerms(e){return{competitiveness:.7}}benchmarkLiability(e){return{risk_level:"medium"}}benchmarkPerformance(e){return{standards:"above average"}}calculateBenchmarkVariance(e){return .15}generateBenchmarkRecommendations(e){return["Align with market standards"]}suggestRiskAdjustments(e){return["Consider liability caps"]}identifyRiskReductions(e){return["Add indemnity clause"]}identifyCostOptimizations(e){return["Streamline payment terms"]}identifyPerformanceImprovements(e){return["Add SLA provisions"]}identifyComplianceEnhancements(e){return["Include regulatory compliance"]}prioritizeOptimizations(e){return[]}createImplementationPlan(e){return{phases:3}}calculateExpectedBenefits(e){return{roi:1.5}}identifyNegotiationPoints(e){return["Payment terms","Liability limits"]}analyzeLeverage(e){return{position:"neutral"}}assessCounterpartyPosition(e){return{strength:"moderate"}}developNegotiationStrategy(e){return{approach:"collaborative"}}suggestNegotiationTactics(e){return["Focus on mutual benefits"]}identifyAlternatives(e){return["Alternative structures"]}identifyWalkAwayPoints(e){return["Unacceptable liability"]}getExecution(e){return this.executions.get(e)}getAllExecutions(){return Array.from(this.executions.values())}getTemplate(e){return this.templates.get(e)}getAllTemplates(){return Array.from(this.templates.values())}saveTemplate(e){let t="template-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),i={...e,id:t,createdAt:new Date,updatedAt:new Date};return this.templates.set(t,i),t}deleteTemplate(e){return this.templates.delete(e)}pauseExecution(e){let t=this.executions.get(e);return!!t&&"running"===t.status&&(t.status="paused",!0)}resumeExecution(e){let t=this.executions.get(e);return!!t&&"paused"===t.status&&(t.status="running",!0)}initializeDefaultTemplates(){let e={id:"contract-review-v1",name:"AI Contract Review",description:"Automated contract analysis and approval workflow",category:"Contract Management",version:"1.0",isActive:!0,createdBy:"system",createdAt:new Date,updatedAt:new Date,nodes:[{id:"trigger-1",type:"trigger",title:"Contract Upload",description:"Triggered when new contract is uploaded",config:{event:"contract.upload"},position:{x:100,y:100},connections:["ai-1"]},{id:"ai-1",type:"ai-analysis",title:"AI Contract Analysis",description:"Analyze contract terms, risks, and compliance",config:{analysisTypes:["risk-assessment","compliance-check","term-extraction"],confidence:.85},position:{x:300,y:100},connections:["condition-1"]},{id:"condition-1",type:"condition",title:"Risk Assessment",description:"Check if high-risk issues detected",config:{condition:"risk_score > 0.7"},position:{x:500,y:100},connections:["approval-1","action-1"]},{id:"approval-1",type:"approval",title:"Senior Review Required",description:"Require senior lawyer approval for high-risk contracts",config:{assignee:"senior-lawyers",priority:"high"},position:{x:700,y:50},connections:["notification-1"]},{id:"action-1",type:"action",title:"Auto-Approve",description:"Automatically approve low-risk contracts",config:{action:"approve",updateStatus:"approved"},position:{x:700,y:150},connections:["notification-2"]},{id:"notification-1",type:"notification",title:"High-Risk Alert",description:"Send alert for high-risk contract",config:{template:"high-risk-contract",recipients:["legal-team"]},position:{x:900,y:50},connections:[]},{id:"notification-2",type:"notification",title:"Approval Notification",description:"Send approval confirmation",config:{template:"contract-approved",recipients:["client","case-manager"]},position:{x:900,y:150},connections:[]}]};this.templates.set(e.id,e);let t={id:"compliance-monitoring-v1",name:"Compliance Monitoring",description:"Automated compliance checking and reporting",category:"Compliance",version:"1.0",isActive:!0,createdBy:"system",createdAt:new Date,updatedAt:new Date,nodes:[{id:"trigger-compliance",type:"trigger",title:"Daily Compliance Check",description:"Triggered daily for compliance monitoring",config:{schedule:"daily"},position:{x:100,y:100},connections:["ai-compliance"]},{id:"ai-compliance",type:"ai-analysis",title:"Compliance Analysis",description:"Analyze documents for compliance issues",config:{analysisTypes:["compliance-check"]},position:{x:300,y:100},connections:["condition-compliance"]},{id:"condition-compliance",type:"condition",title:"Issues Found?",description:"Check if compliance issues detected",config:{condition:"issues.length > 0"},position:{x:500,y:100},connections:["notification-issues","action-compliant"]},{id:"notification-issues",type:"notification",title:"Compliance Issues Alert",description:"Alert about compliance issues",config:{template:"compliance-issues",recipients:["compliance-team"]},position:{x:700,y:50},connections:[]},{id:"action-compliant",type:"action",title:"Mark Compliant",description:"Mark as compliant if no issues found",config:{action:"update-status",updateStatus:"compliant"},position:{x:700,y:150},connections:[]}]};this.templates.set(t.id,t);let i={id:"document-generation-v1",name:"AI Document Generation",description:"Automated legal document generation with AI assistance",category:"Document Automation",version:"1.0",isActive:!0,createdBy:"system",createdAt:new Date,updatedAt:new Date,nodes:[{id:"trigger-doc-gen",type:"trigger",title:"Document Request",description:"Triggered when document generation is requested",config:{event:"document.generate"},position:{x:100,y:100},connections:["ai-doc-analysis"]},{id:"ai-doc-analysis",type:"ai-analysis",title:"Analyze Requirements",description:"AI analysis of document requirements and context",config:{analysisTypes:["requirement-analysis","template-selection"],confidence:.8},position:{x:300,y:100},connections:["action-generate"]},{id:"action-generate",type:"action",title:"Generate Document",description:"Generate document using AI templates",config:{action:"generate-document",template:"legal-doc"},position:{x:500,y:100},connections:["ai-review"]},{id:"ai-review",type:"ai-analysis",title:"AI Quality Review",description:"Review generated document for quality and compliance",config:{analysisTypes:["quality-check","compliance-check"],confidence:.9},position:{x:700,y:100},connections:["condition-quality"]},{id:"condition-quality",type:"condition",title:"Quality Check",description:"Check if document meets quality standards",config:{condition:"quality_score > 0.8"},position:{x:900,y:100},connections:["approval-final","action-revise"]},{id:"approval-final",type:"approval",title:"Final Approval",description:"Human review and approval of generated document",config:{assignee:"legal-reviewer",priority:"medium"},position:{x:1100,y:50},connections:["notification-complete"]},{id:"action-revise",type:"action",title:"Request Revision",description:"Send document back for revision",config:{action:"request-revision",reason:"quality-issues"},position:{x:1100,y:150},connections:["notification-revision"]},{id:"notification-complete",type:"notification",title:"Document Ready",description:"Notify that document is ready for use",config:{template:"document-ready",recipients:["requester"]},position:{x:1300,y:50},connections:[]},{id:"notification-revision",type:"notification",title:"Revision Required",description:"Notify about revision requirements",config:{template:"revision-needed",recipients:["legal-team"]},position:{x:1300,y:150},connections:[]}]};this.templates.set(i.id,i);let n={id:"legal-research-v1",name:"Automated Legal Research",description:"AI-powered comprehensive legal research and analysis",category:"Legal Research",version:"1.0",isActive:!0,createdBy:"system",createdAt:new Date,updatedAt:new Date,nodes:[{id:"trigger-research",type:"trigger",title:"Research Request",description:"Triggered when legal research is requested",config:{event:"research.request"},position:{x:100,y:100},connections:["ai-research-analysis"]},{id:"ai-research-analysis",type:"ai-analysis",title:"Query Analysis",description:"Analyze research query and identify key legal issues",config:{analysisTypes:["query-analysis","jurisdiction-detection"],confidence:.85},position:{x:300,y:100},connections:["action-search"]},{id:"action-search",type:"action",title:"Execute Research",description:"Perform comprehensive legal database search",config:{action:"legal-search",databases:["case-law","statutes","regulations"]},position:{x:500,y:100},connections:["ai-synthesis"]},{id:"ai-synthesis",type:"ai-analysis",title:"Research Synthesis",description:"Synthesize research results and create comprehensive analysis",config:{analysisTypes:["result-synthesis","precedent-analysis"],confidence:.9},position:{x:700,y:100},connections:["condition-complete"]},{id:"condition-complete",type:"condition",title:"Research Complete?",description:"Check if research meets completeness criteria",config:{condition:"result_count > 5 && confidence > 0.8"},position:{x:900,y:100},connections:["action-finalize","action-expand"]},{id:"action-finalize",type:"action",title:"Finalize Report",description:"Create final research report with citations",config:{action:"generate-report",format:"legal-memo"},position:{x:1100,y:50},connections:["notification-ready"]},{id:"action-expand",type:"action",title:"Expand Research",description:"Expand search scope for more comprehensive results",config:{action:"expand-search",scope:"broader"},position:{x:1100,y:150},connections:["ai-synthesis"]},{id:"notification-ready",type:"notification",title:"Research Complete",description:"Notify that research report is ready",config:{template:"research-complete",recipients:["requester"]},position:{x:1300,y:50},connections:[]}]};this.templates.set(n.id,n);let a={id:"contract-intelligence-v1",name:"Contract Intelligence Analysis",description:"Advanced AI-powered contract intelligence and insights",category:"Contract Intelligence",version:"1.0",isActive:!0,createdBy:"system",createdAt:new Date,updatedAt:new Date,nodes:[{id:"trigger-intelligence",type:"trigger",title:"Contract Upload",description:"Triggered when contract is uploaded for intelligence analysis",config:{event:"contract.intelligence"},position:{x:100,y:100},connections:["ai-classification"]},{id:"ai-classification",type:"ai-analysis",title:"Contract Classification",description:"Classify contract type and identify key provisions",config:{analysisTypes:["contract-classification","provision-extraction"],confidence:.88},position:{x:300,y:100},connections:["ai-comparison"]},{id:"ai-comparison",type:"ai-analysis",title:"Market Comparison",description:"Compare contract terms against market standards",config:{analysisTypes:["market-analysis","benchmarking"],confidence:.85},position:{x:500,y:100},connections:["ai-optimization"]},{id:"ai-optimization",type:"ai-analysis",title:"Term Optimization",description:"Identify optimization opportunities and negotiate strategies",config:{analysisTypes:["optimization-analysis","negotiation-insights"],confidence:.9},position:{x:700,y:100},connections:["action-report"]},{id:"action-report",type:"action",title:"Generate Intelligence Report",description:"Create comprehensive contract intelligence report",config:{action:"generate-intelligence-report",format:"executive-summary"},position:{x:900,y:100},connections:["notification-insights"]},{id:"notification-insights",type:"notification",title:"Intelligence Ready",description:"Notify that contract intelligence analysis is complete",config:{template:"intelligence-report",recipients:["business-team","legal-team"]},position:{x:1100,y:100},connections:[]}]};this.templates.set(a.id,a)}constructor(){this.executions=new Map,this.templates=new Map,this.initializeDefaultTemplates()}}let s=new a}}]);